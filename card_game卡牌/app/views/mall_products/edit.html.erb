<p class="sub-header">奇珍商城>商品管理>修改商品><%= @mall_product.name %></p>

<form action="/mall_products/update" method="post" onsubmit="return mall_products_form_validate(this)">

  <input type="hidden" name="id" value="<%= @mall_product.id %>">
  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">商品类别</label>
    <div class="col-sm-8">
      <select class="select2-picker" name="product_tag_id" style="width: 100%">
        <% @product_tags.each do |tag| %>
            <% if @mall_product.product_tag_id == tag.id %>
                <option value=<%= tag.id %> selected><%= tag.name %></option>
            <% else %>
                <option value=<%= tag.id %>><%= tag.name %></option>
            <% end %>
        <% end %>
      </select>
    </div>
  </div>
  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">商品名称</label>
    <div class="col-sm-8">
      <input type="input" name="name" class="form-control" id="product_name_input" value="<%= @mall_product.name %>"
             required="required" onkeyup="validate_words_length(30,'product_name_input','product_name_last_num')" maxlength="30"
             oninvalid="setCustomValidity('商品名称必填!最多30字')" oninput="setCustomValidity('')"
             placeholder="商品名称，最多30字">
      <p class="bg-danger p_last_num" id="product_name_last_num"></p>
    </div>

  </div>


  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">SKU_ID</label>
    <div class="col-sm-8">
      <input type="input" name="sku" class="form-control" id="sku_input" value="<%= @mall_product.sku %>"
             onkeyup="validate_words_length(30,'sku_input','sku_last_num')" placeholder="SKU_ID，最多30字">
      <p class="bg-danger p_last_num" id="sku_last_num"></p>
    </div>

  </div>

  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">商品库存地</label>
    <div class="col-sm-8">
      <input type="input" name="inventory_place" class="form-control" id="inventory_place" value="<%= @mall_product.inventory_place %>"
             onkeyup="validate_words_length(30,'inventory_place','inventory_place_last_num')" placeholder="商品库存地，最多30字">

      <p class="bg-danger p_last_num" id="inventory_place_last_num"></p>
    </div>

  </div>

  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">市场价格</label>
    <div class="col-sm-8">
      <input type="number" name="market_price" min="0" max="99999999" step='0.01'
             value="<%= @mall_product.market_price.to_f %>"
             oninvalid="setCustomValidity('市场价格必填数字')" oninput="setCustomValidity('')"
             class="form-control" required="required" placeholder="市场价格">
    </div>
  </div>


  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">商品库存</label>
    <div class="col-sm-8">
      <input type="number" min="1" max="99999999" name="inventory_count"
             value="<%= @mall_product.inventory_count %>"
             oninvalid="setCustomValidity('商品库存必填数字,并且大于1')" oninput="setCustomValidity('')"
             class="form-control" required="required" placeholder="商品库存">
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">通兑方式</label>
    <input type='hidden' min="0" value="100" id="exchange_type_input" value="<%= @mall_product.exchange_type %>" class="form-check-input" name="exchange_type"/>
    <div class="col-sm-8">
      <div class="form-check">
        <label class="form-check-label">
          <input class="form-check-input" type="checkbox" value='0' name="exchange_type0" <%= is_exchange_checked @mall_product.exchange_type, 0 %>>
          功勋
          <input type='number' min="1" class="form-check-input" name="micro_ticket" value="<%= @mall_product.micro_ticket %>"/>
        </label>

      </div>
      <div class="form-check">
        <label class="form-check-label">
          <input class="form-check-input" type="checkbox" value="1" name="exchange_type1" <%= is_exchange_checked @mall_product.exchange_type, 1 %>  >
          微集分
          <input type='number' min="1" class="form-check-input" name="micro_score" value="<%= @mall_product.micro_score %>"/>
        </label>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">邮费</label>
    <div class="col-sm-8">
      <input type="number" min="0" max="99999999" step="0.01" name="postage"
             value="<%= @mall_product.postage %>"
             class="form-control" placeholder="邮费">
    </div>
  </div>


  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">优众链接</label>
    <div class="col-sm-8">
      <input type="input" name="detail_url" class="form-control" value="<%= @mall_product.detail_url %>" placeholder="优众链接">
    </div>
  </div>


  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">缩略图</label>
    <div class="col-sm-8">
      <%= render 'images/upload_single_image' %>
    </div>
  </div>

  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">展示图片</label>
    <div class="col-sm-8">
      <%= render 'images/upload_multiple_image' %>
    </div>
  </div>


  <div class="form-group row">
    <label for="input" class="col-sm-2 col-form-label">图文描述:</label>
    <div class="col-sm-8">
      <textarea id="mall_products_desc" name="desc" class="tinymce"><%= @mall_product.desc %></textarea>
    </div>
  </div>


  <div class="form-group row">
    <label for="input" class="col-sm-4 col-form-label"></label>
    <div class=" col-sm-6">
      <button type="submit" class="btn-lg btn-primary">保存</button>
    </div>
  </div>

</form>


<%= render 'mall_products/tinymce' %>